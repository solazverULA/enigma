import { Injectable } from '@angular/core';

/*
  Generated class for the RoutersProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
@Injectable()
export class RoutersProvider {

	position: number;
	signalOut: boolean;
	abc: Array<string>;
	regSelect: Array<string>;
	regInput: Array<string>;
	abcStatic: Array<string>;

  constructor()
  {
  	this.position = 0;
    this.signalOut = false;

    
    this.abc 
    = [
      " ","!","\"","#","$","%","&","'","(",")","*","+",
      ",","-",".","/","0","1","2","3","4","5","6","7",
      "8","9",":",";","<","=",">","?","@","A","B","C",
      "D","E","F","G","H","I","J","K","L","M","N","O",
      "P","Q","R","S","T","U","V","W","X","Y","Z","[",
      "\\","]","^","_","`","a","b","c","d","e","f","g",
      "h","i","j","k","l","m","n","o","p","q","r","s",
      "t","u","v","w","x","y","z","{","|","}","~","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "",""," ","¡","¢","£","¤","¥","¦","§","¨","©",
      "ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶",
      "·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã",
      "Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð",
      "Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý",
      "Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê",
      "ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷",
      "ø","ù","ú","û","ü","ý","þ","ÿ"
    ];


    
    this.abcStatic 
    = [
      " ","!","\"","#","$","%","&","'","(",")","*","+",
      ",","-",".","/","0","1","2","3","4","5","6","7",
      "8","9",":",";","<","=",">","?","@","A","B","C",
      "D","E","F","G","H","I","J","K","L","M","N","O",
      "P","Q","R","S","T","U","V","W","X","Y","Z","[",
      "\\","]","^","_","`","a","b","c","d","e","f","g",
      "h","i","j","k","l","m","n","o","p","q","r","s",
      "t","u","v","w","x","y","z","{","|","}","~","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "",""," ","¡","¢","£","¤","¥","¦","§","¨","©",
      "ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶",
      "·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã",
      "Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð",
      "Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý",
      "Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê",
      "ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷",
      "ø","ù","ú","û","ü","ý","þ","ÿ"
    ];

  }

  setReg(regSelect){ 
  	this.regSelect = Object.assign([], regSelect);
    this.regInput =  Object.assign([], regSelect);
  }

	encryptInside(input,signal){

    this.signalOut=false;

    if(signal === true){

      this.abc.push(this.abc.shift());
      this.regInput.push(this.regInput.shift());

      this.position+=1;

      if (this.position > 224) {
        this.signalOut=true;
        this.position=0;
      }
    }
    
    var inputNumber = (input.charCodeAt() - " ".charCodeAt(0));
    var encrypt = this.regInput[this.abc.indexOf(this.abc[inputNumber])];

    var out = this.abcStatic[this.abc.indexOf(encrypt)];
    
    var jsonOut = {
      abcCurrent : this.abc, 
      signalOut: this.signalOut,
      out: out 
    };

    return jsonOut;
  };

  encryptOutside(input)
  { 
    var inputNumber = (input.charCodeAt() - " ".charCodeAt(0));
   
    var encrypt = this.abc[this.regInput.indexOf(this.abc[inputNumber])];
   
    return this.abcStatic[this.abc.indexOf(encrypt)];
  };


  restart = function()
  {
    this.regInput= Object.assign([], this.regSelect);  
    this.position= 0;
    
    
    this.abc 
    = [
      " ","!","\"","#","$","%","&","'","(",")","*","+",
      ",","-",".","/","0","1","2","3","4","5","6","7",
      "8","9",":",";","<","=",">","?","@","A","B","C",
      "D","E","F","G","H","I","J","K","L","M","N","O",
      "P","Q","R","S","T","U","V","W","X","Y","Z","[",
      "\\","]","^","_","`","a","b","c","d","e","f","g",
      "h","i","j","k","l","m","n","o","p","q","r","s",
      "t","u","v","w","x","y","z","{","|","}","~","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "",""," ","¡","¢","£","¤","¥","¦","§","¨","©",
      "ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶",
      "·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã",
      "Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð",
      "Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý",
      "Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê",
      "ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷",
      "ø","ù","ú","û","ü","ý","þ","ÿ"
    ];


    return this.abc[0];
  };

  move(newposition)
  {
    this.position = (newposition.charCodeAt() - " ".charCodeAt(0));
    
    this.regInput= Object.assign([], this.regSelect); 

    this.abc 
    = [
      " ","!","\"","#","$","%","&","'","(",")","*","+",
      ",","-",".","/","0","1","2","3","4","5","6","7",
      "8","9",":",";","<","=",">","?","@","A","B","C",
      "D","E","F","G","H","I","J","K","L","M","N","O",
      "P","Q","R","S","T","U","V","W","X","Y","Z","[",
      "\\","]","^","_","`","a","b","c","d","e","f","g",
      "h","i","j","k","l","m","n","o","p","q","r","s",
      "t","u","v","w","x","y","z","{","|","}","~","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "","","","","","","","","","",
      "",""," ","¡","¢","£","¤","¥","¦","§","¨","©",
      "ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶",
      "·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã",
      "Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð",
      "Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý",
      "Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê",
      "ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷",
      "ø","ù","ú","û","ü","ý","þ","ÿ"
    ];

    for (var i = 0; i < this.position; i++) {
      this.abc.push(this.abc.shift());
      this.regInput.push(this.regInput.shift());
    }

    return this.abc[0];
  };

}
